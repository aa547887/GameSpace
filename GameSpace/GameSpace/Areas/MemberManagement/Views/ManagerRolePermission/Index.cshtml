@model IEnumerable<GameSpace.Areas.MemberManagement.Models.ManagerRolePermissionVM>

@{
    ViewData["Title"] = "GameSpace";
    // 保留側欄狀態（預設 admin）
    var sidebar = (string)(ViewBag.Sidebar ?? Context.Request.Query["sidebar"].ToString() ?? "admin");
}

<h1>職位功能查詢表</h1>

@* <p>
    <a asp-action="Create"
       asp-route-sidebar="@sidebar"
       class="btn btn-sm btn-primary">Create New</a>
</p> *@

<table id="rolesTable" class="table table-striped table-hover align-middle w-100">
    <thead>
        <tr>
            <th>@Html.DisplayNameFor(m => m.RoleName)</th>
            <th>@Html.DisplayNameFor(m => m.AdministratorPrivilegesManagement)</th>
            <th>@Html.DisplayNameFor(m => m.UserStatusManagement)</th>
            <th>@Html.DisplayNameFor(m => m.ShoppingPermissionManagement)</th>
            <th>@Html.DisplayNameFor(m => m.MessagePermissionManagement)</th>
            <th>@Html.DisplayNameFor(m => m.PetRightsManagement)</th>
            <th>@Html.DisplayNameFor(m => m.CustomerService)</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@item.RoleName</td>
                <td><span class="@(item.AdministratorPrivilegesManagement ? "text-dark" : "text-danger")">@(item.AdministratorPrivilegesManagement ? "開通" : "關閉")</span></td>
                <td><span class="@(item.UserStatusManagement ? "text-dark" : "text-danger")">@(item.UserStatusManagement ? "開通" : "關閉")</span></td>
                <td><span class="@(item.ShoppingPermissionManagement ? "text-dark" : "text-danger")">@(item.ShoppingPermissionManagement ? "開通" : "關閉")</span></td>
                <td><span class="@(item.MessagePermissionManagement ? "text-dark" : "text-danger")">@(item.MessagePermissionManagement ? "開通" : "關閉")</span></td>
                <td><span class="@(item.PetRightsManagement ? "text-dark" : "text-danger")">@(item.PetRightsManagement ? "開通" : "關閉")</span></td>
                <td><span class="@(item.CustomerService ? "text-dark" : "text-danger")">@(item.CustomerService ? "開通" : "關閉")</span></td>
            </tr>
        }
    </tbody>
</table>
@section Styles {
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.8/css/dataTables.bootstrap5.min.css" />
}

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.8/js/dataTables.bootstrap5.min.js"></script>
    <script>
        $(function () {
            $('#rolesTable').DataTable({
                columnDefs: [ { targets: [0], orderable: false } ],
                searching:false,                           // 拿掉「搜尋：」這個標籤
                paging: true,
                pageLength: 10,
                lengthMenu: [10, 25, 50, 100],
                autoWidth: false,
                order: [],                 // 不覆蓋你原本輸出的排序
                // Boolean 欄位通常不需要參與搜尋，可視需要開關
                // columnDefs: [{ targets: [1,2,3,4,5,6], searchable: false }],
                language: {

                    processing:   "處理中…",   
                    lengthMenu:   "每頁顯示 _MENU_ 筆",
                    zeroRecords:  "沒有符合的結果",
                    info:         "第 _START_–_END_ 筆，共 _TOTAL_ 筆",
                    infoEmpty:    "顯示第 0–0 筆，共 0 筆",
                    infoFiltered: "(自 _MAX_ 筆資料中篩選)",
                    paginate: {
                        first:    "第一頁",
                        previous: "上一頁",
                        next:     "下一頁",
                        last:     "最後一頁"
                    }
                },
                // Bootstrap 5 版面配置（可調整）
                dom:
                  "<'row'<'col-md-6'l><'col-md-6 text-md-end'f>>" +
                  "<'row'<'col-12'tr>>" +
                  "<'row'<'col-md-5'i><'col-md-7'p>>"
            });
        });
    </script>
}
