@{
    ViewData["Title"] = "資料庫連線測試";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card shadow mb-4">
                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                    <h6 class="m-0 font-weight-bold text-primary">資料庫連線測試</h6>
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        <h5>@ViewBag.ConnectionStatus</h5>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-3">
                            <div class="card border-left-primary shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                                使用者總數</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">@ViewBag.UserCount</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-users fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="card border-left-success shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                寵物總數</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">@ViewBag.PetCount</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-paw fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="card border-left-info shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                                                小遊戲總數</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">@ViewBag.MiniGameCount</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-gamepad fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="card border-left-warning shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                                錢包總數</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">@ViewBag.WalletCount</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-wallet fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-md-3">
                            <div class="card border-left-danger shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">
                                                優惠券總數</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">@ViewBag.CouponCount</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-ticket-alt fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="card border-left-secondary shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-secondary text-uppercase mb-1">
                                                電子禮券總數</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">@ViewBag.EVoucherCount</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-gift fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="card border-left-dark shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-dark text-uppercase mb-1">
                                                管理者總數</div>
                                            <div class="h5 mb-0 font-weight-bold text-gray-800">@ViewBag.ManagerCount</div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-user-shield fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="card-title">測試按鈕</h5>
                                </div>
                                <div class="card-body">
                                    <button class="btn btn-primary" onclick="testUsers()">測試使用者資料</button>
                                    <button class="btn btn-success" onclick="testPets()">測試寵物資料</button>
                                    <button class="btn btn-info" onclick="testMiniGames()">測試小遊戲資料</button>
                                    <button class="btn btn-warning" onclick="testCoupons()">測試優惠券資料</button>
                                    <button class="btn btn-danger" onclick="testEVouchers()">測試電子禮券資料</button>
                                    <button class="btn btn-dark" onclick="testManagers()">測試管理者資料</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="card-title">測試結果</h5>
                                </div>
                                <div class="card-body">
                                    <pre id="testResult" class="bg-light p-3" style="min-height: 200px;">點擊上方按鈕開始測試...</pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function testUsers() {
    fetch('/MiniGame/Test/GetUsers')
        .then(response => response.json())
        .then(data => {
            document.getElementById('testResult').textContent = JSON.stringify(data, null, 2);
        })
        .catch(error => {
            document.getElementById('testResult').textContent = '錯誤: ' + error.message;
        });
}

function testPets() {
    fetch('/MiniGame/Test/GetPets')
        .then(response => response.json())
        .then(data => {
            document.getElementById('testResult').textContent = JSON.stringify(data, null, 2);
        })
        .catch(error => {
            document.getElementById('testResult').textContent = '錯誤: ' + error.message;
        });
}

function testMiniGames() {
    fetch('/MiniGame/Test/GetMiniGames')
        .then(response => response.json())
        .then(data => {
            document.getElementById('testResult').textContent = JSON.stringify(data, null, 2);
        })
        .catch(error => {
            document.getElementById('testResult').textContent = '錯誤: ' + error.message;
        });
}

function testCoupons() {
    fetch('/MiniGame/Test/GetCoupons')
        .then(response => response.json())
        .then(data => {
            document.getElementById('testResult').textContent = JSON.stringify(data, null, 2);
        })
        .catch(error => {
            document.getElementById('testResult').textContent = '錯誤: ' + error.message;
        });
}

function testEVouchers() {
    fetch('/MiniGame/Test/GetEVouchers')
        .then(response => response.json())
        .then(data => {
            document.getElementById('testResult').textContent = JSON.stringify(data, null, 2);
        })
        .catch(error => {
            document.getElementById('testResult').textContent = '錯誤: ' + error.message;
        });
}

function testManagers() {
    fetch('/MiniGame/Test/GetManagers')
        .then(response => response.json())
        .then(data => {
            document.getElementById('testResult').textContent = JSON.stringify(data, null, 2);
        })
        .catch(error => {
            document.getElementById('testResult').textContent = '錯誤: ' + error.message;
        });
}
</script>
