<!--這是舊檔案不會用到了-->
@* @{
    ViewData["Title"] = "GamiStore 首頁";
}

<div class="container-xxl py-3">
    <div class="row g-4">

        <!-- 左主欄 -->
        <div class="col-12 col-xxl-9">

            <!-- ========== B) 旋轉木馬 + 果凍搜尋條（貼在 _StoreBar.Cats 正下方） ========== -->
            <div id="storeHero" class="carousel slide mb-4" data-bs-ride="carousel" data-bs-interval="5000">
                <div class="carousel-inner hero-inner">
                    <div class="carousel-item active"><img src="~/images/onlinestoreCM/01廣告，GamiStoreBirth.png" alt="GamiStore Birthday"></div>
                    <div class="carousel-item"><img src="~/images/onlinestoreCM/02廣告，卡比.jpg" alt="卡比"></div>
                    <div class="carousel-item"><img src="~/images/onlinestoreCM/03廣告，NINJA.jpg" alt="NINJA"></div>
                    <div class="carousel-item"><img src="~/images/onlinestoreCM/04廣告，絕對摩拳.jpg" alt="絕對摩拳"></div>
                    <div class="carousel-item"><img src="~/images/onlinestoreCM/05廣告，無雙戰技.jpg" alt="無雙戰技"></div>
                </div>

                <!-- 透明感左右切換 -->
                <button class="carousel-control-prev hero-ctrl" type="button" data-bs-target="#storeHero" data-bs-slide="prev">
                    <i class="bi bi-chevron-left"></i><span class="visually-hidden">Prev</span>
                </button>
                <button class="carousel-control-next hero-ctrl" type="button" data-bs-target="#storeHero" data-bs-slide="next">
                    <i class="bi bi-chevron-right"></i><span class="visually-hidden">Next</span>
                </button>

                <!-- 進度條指示（不會被搜尋條蓋住，貼底） -->
                <div class="hero-indicators">
                    <div class="hero-progress"><span></span></div>
                </div>

                <!-- 果凍搜尋 -->
                <div class="hero-search">
                    <i class="bi bi-search"></i>
                    <input id="heroQ" placeholder="搜尋文章、遊戲、看板…" />
                    <button class="btn btn-primary btn-sm" id="heroGo">搜尋</button>
                </div>

                <!-- 左右剪影（視覺：前後廣告的模糊影子） -->
                <div class="hero-fade hero-fade-left"></div>
                <div class="hero-fade hero-fade-right"></div>
            </div>

            <!-- ========== C) 排行榜（玻璃三頁籤，共用 placeholder；固定高度） ========== -->
            <section class="block">
                <div class="block-head">
                    <div class="glass-tabs" id="rank-tabs">
                        <button class="glass-tab active" data-kind="sales">每日熱銷</button>
                        <button class="glass-tab" data-kind="views">熱門點擊</button>
                        <button class="glass-tab" data-kind="fav">收藏飆升</button>
                    </div>
                    <div class="block-desc" id="rank-upd">更新於：--</div>
                </div>

                <div class="grid">
                    <div id="rank-wrap" class="fix-body">
                        <div class="top3" id="rank-top3"></div>
                        <div class="side-list" id="rank-side"></div>
                        <div class="empty d-none" id="rank-empty">尚無資料</div>
                    </div>

                    <!-- E 的第一組方形廣告位（不影響 B） -->
                    <aside class="mini-ads">
                        <a class="mini-ad ad-hover-sheen ad-breathe" href="#"><img src="~/images/onlinestoreCM/02廣告，卡比.jpg" alt=""></a>
                        <a class="mini-ad ad-hover-sheen" href="#"><img src="~/images/onlinestoreCM/03廣告，NINJA.jpg" alt=""></a>
                        <a class="mini-ad ad-hover-sheen" href="#"><img src="~/images/onlinestoreCM/04廣告，絕對摩拳.jpg" alt=""></a>
                    </aside>
                </div>
            </section>

            <!-- ========== D) 簡易商品瀏覽（三頁籤；一排5×2；固定高度；右上更多…） ========== -->
            <section class="block">
                <div class="block-head">
                    <div class="glass-tabs" id="browse-tabs">
                        <button class="glass-tab active" data-kind="game">遊戲商品</button>
                        <button class="glass-tab" data-kind="notgame">周邊商品</button>
                        <button class="glass-tab" data-kind="points">點數卡</button>
                    </div>
                    <div class="block-desc"><a id="browse-more" class="link-more" href="/OnlineStore/Browse">更多…</a></div>
                </div>

                <div class="grid-browse">
                    <div id="browse-grid" class="cards-rows fix-body"></div>

                    <!-- E 的第二組方形廣告位 -->
                    <aside class="mini-ads">
                        <a class="mini-ad ad-hover-sheen" href="#"><img src="~/images/onlinestoreCM/05廣告，無雙戰技.jpg" alt=""></a>
                        <a class="mini-ad ad-hover-sheen" href="#"><img src="~/images/onlinestoreCM/01廣告，GamiStoreBirth.png" alt=""></a>
                        <a class="mini-ad ad-hover-sheen" href="#"><img src="~/images/onlinestoreCM/02廣告，卡比.jpg" alt=""></a>
                    </aside>
                </div>
            </section>

        </div>

        <!-- 右欄 -->
        <aside class="col-xxl-3 d-none d-xxl-block">
            <div class="right-rail">
                <!-- 右側廣告條 -->
                @await Html.PartialAsync("/Areas/OnlineStore/Views/Shared/_RightRailAds.cshtml")
            </div>
        </aside>

    </div>
</div>

@section Styles {
    <style>
        /* 右欄貼齊頂部 */
        .right-rail {
            position: sticky;
            top: var(--dock-top, 68px);
        }

        /* ---- 卡片容器 & tabs ---- */
        .block {
            background: #fff;
            border-radius: 16px;
            padding: 12px 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,.08);
        }
        .block + .block {
            margin-top: 24px;
        }

        .block-head {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 12px;
        }

        .block-desc {
            margin-left: auto;
            color: #7c8591;
        }

        .link-more {
            text-decoration: none;
            font-weight: 700;
        }

        .glass-tabs {
            display: flex;
            gap: 10px;
        }

        .glass-tab {
            border: 0;
            padding: .45rem .9rem;
            border-radius: 999px;
            background: rgba(255,255,255,.6);
            backdrop-filter: blur(8px);
            box-shadow: 0 6px 18px rgba(0,0,0,.08);
            color: #111;
            font-weight: 700;
            transition: transform .15s, box-shadow .15s, background-color .15s;
        }

        .glass-tab:hover {
            transform: translateY(-1.5px);
            box-shadow: 0 12px 26px rgba(0,0,0,.12);
        }

        .glass-tab.active {
            background: #0d6efd;
            color: #fff;
        }

        /* ===== B：輪播固定高度（不吃圖高），超出以留白顯示 ===== */
        :root {
            --hero-h: 420px;
        }

        #storeHero .hero-inner {
            height: var(--hero-h);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 14px 36px rgba(0,0,0,.12);
            background: #f2f3f5;
        }

        #storeHero .carousel-item,
        #storeHero .carousel-item img {
            height: 100%;
        }

        #storeHero .carousel-item img {
            width: 100%;
            object-fit: contain; /* 固定高度，必要時左右補留白 */
            background: #f2f3f5; /* 留白色 */
        }

        /* 輪播左右剪影若要保留，可加：*/
        #storeHero::before,#storeHero::after{content:"";position:absolute;top:0;bottom:0;width:12%;pointer-events:none;}
        #storeHero::before{left:0;background:linear-gradient(90deg,rgba(255,255,255,.85),transparent);}
        #storeHero::after{right:0;background:linear-gradient(270deg,rgba(255,255,255,.85),transparent);}

        /* 輪播左右控制鈕（透明玻璃） */
        .hero-ctrl {
            width: 42px;
            height: 42px;
            border: 0;
            border-radius: 999px;
            background: rgba(255,255,255,.6);
            backdrop-filter: blur(6px);
            top: 50%;
            transform: translateY(-50%);
        }

        .hero-ctrl i {
            font-size: 18px;
            color: #222;
        }

        .hero-ctrl:hover {
            background: rgba(255,255,255,.85);
        }

        /* 進度條（獨立在下方） */
        .hero-indicators {
            padding: 0 18%;
        }

        .hero-progress {
            height: 4px;
            background: rgba(0,0,0,.08);
            border-radius: 99px;
            overflow: hidden;
        }

        .hero-progress span {
            display: block;
            height: 100%;
            width: 0;
            background: #0d6efd;
            transition: width .3s ease;
        }

        /* 搜尋條（獨立在進度條下方） */
        .hero-search-outside {
            display: flex;
            justify-content: center;
        }

        .glass {
            background: rgba(255,255,255,.62);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0,0,0,.08);
        }

        .hero-search {
            display: flex;
            align-items: center;
            gap: 10px;
            width: min(980px,94%);
            padding: 10px 12px;
            border-radius: 16px;
        }

        .hero-search input {
            border: 0;
            background: transparent;
            outline: none;
            width: 100%;
        }

        .hero-search:hover {
            background: rgba(255,255,255,.8);
        }

        /* ---- C) 排行榜布局 ---- */
        .grid {
            display: grid;
            grid-template-columns: minmax(520px,1fr) 300px;
            gap: 16px;
        }

        @@media (max-width:1200px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }

        /* 固定高度（不跳動） */
        .fix-body {
            min-height: 420px;
        }

        /* Top1~3 卡片 + 右側 4~10 列表 （固定高度不跳）*/
        .top3 {
            display: grid;
            grid-template-columns: repeat(3, minmax(0,1fr));
            gap: 12px;
        }

        .top-card {
            position: relative;
            border-radius: 14px;
            overflow: hidden;
            background: #f7f7f9;
            box-shadow: 0 6px 18px rgba(0,0,0,.08);
            transition: transform .15s ease, box-shadow .15s ease;
            display: flex;
            flex-direction: column;
        }

        .top-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 28px rgba(0,0,0,.12);
        }

        .top-card .cover {
            aspect-ratio: 16/10;
            background: #ddd;
            background-position: center;
            background-size: cover;
        }

        .top-card .body {
            padding: 10px 12px;
        }

        .top-card .title {
            font-weight: 700;
            line-height: 1.2;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .top-card .price {
            color: #2563eb;
            font-weight: 800;
        }

        .badge-rank {
            position: absolute;
            left: 8px;
            top: 8px;
            z-index: 2;
            background: linear-gradient(135deg,#ffd54f,#ffb300);
            color: #5b4100;
            font-weight: 800;
            border-radius: 10px;
            padding: 4px 8px;
            font-size: .85rem;
        }

        .side-list {
            background: #fff;
            border-radius: 12px;
            border: 1px solid rgba(0,0,0,.06);
        }

        .side-item {
            display: grid;
            grid-template-columns: 36px 1fr auto;
            gap: 10px;
            padding: 10px 12px;
            align-items: center;
            border-bottom: 1px dashed rgba(0,0,0,.06);
        }

        .side-item:last-child {
            border-bottom: 0;
        }

        .side-rank {
            width: 36px;
            height: 28px;
            border-radius: 8px;
            background: #eef3ff;
            color: #1f3b8f;
            font-weight: 800;
            display: grid;
            place-items: center;
        }

        .side-title {
            display: -webkit-box;
            -webkit-line-clamp: 1;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .side-meta {
            display: flex;
            gap: 10px;
            align-items: center;
            color: #8893a1;
            font-size: .9rem;
        }

        .side-meta .tag {
            border: 1px solid rgba(0,0,0,.12);
            border-radius: 999px;
            padding: 2px 8px;
            font-weight: 700;
        }

        .empty {
            display: grid;
            place-items: center;
            height: 240px;
            color: #96A0AE;
        }

        /* ---- D) 簡易瀏覽：5×2 卡片，固定高度 ---- */
        .grid-browse {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 16px;
        }

        @@media (max-width:1200px) {
            .grid-browse {
                grid-template-columns: 1fr;
            }
        }

        .cards-rows {
            display: grid;
            grid-template-columns: repeat(5,minmax(0,1fr));
            gap: 12px;
        }

        @@media (max-width:1400px) {
            .cards-rows {
                grid-template-columns: repeat(4,1fr);
            }
        }

        @@media (max-width:992px) {
            .cards-rows {
                grid-template-columns: repeat(2,1fr);
            }
        }

        .card-mini {
            background: #fff;
            border: 1px solid rgba(0,0,0,.06);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 6px 18px rgba(0,0,0,.06);
        }

        .card-mini .thumb {
            aspect-ratio: 16/10;
            background: #eee;
            background-position: center;
            background-size: cover;
        }

        .card-mini .body {
            padding: 10px;
        }

        .card-mini .name {
            font-weight: 700;
            line-height: 1.2;
            height: 2.4em;
            overflow: hidden;
        }

        .card-mini .meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 6px;
        }

        .card-mini .price {
            color: #2563eb;
            font-weight: 800;
        }

        /* ---- 迷你廣告 ---- */
        .mini-ads {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }

        .mini-ad {
            position: relative;
            display: block;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 22px rgba(0,0,0,.12);
        }

        .mini-ad img {
            width: 100%;
            height: auto;
            display: block;
            transition: transform .25s ease;
        }

        .mini-ad:hover img {
            transform: scale(1.03);
        }

        .ad-hover-sheen::after {
            content: "";
            position: absolute;
            top: 0;
            left: -150%;
            width: 50%;
            height: 100%;
            background: linear-gradient(120deg, transparent 0%, rgba(255,255,255,.35) 50%, transparent 100%);
            transform: skewX(-20deg);
            transition: left .55s ease;
            pointer-events: none;
        }

        .ad-hover-sheen:hover::after {
            left: 130%;
        }
        .ad-breathe {
            animation: breathe 3s ease-in-out infinite;
        }
        @@keyframes breathe {
            0%,100% { transform: scale(1); }
            50% { transform: scale(1.02); }

        }
    </style>
} *@
