@model SignInRulesViewModel
@{
	ViewData["Title"] = "簽到獎勵規則";
}

<!-- 頁面標題 -->
<div class="container py-4">
	<div class="row mb-4">
		<div class="col-12">
			<div class="d-flex align-items-center justify-content-between">
				<h2 class="fw-bold text-dark mb-0">
					<i class="fas fa-calendar-check text-info me-2"></i>
					簽到獎勵規則
				</h2>
				<a href="@Url.Action("Index", "SignIn")" class="btn btn-outline-info rounded-pill px-4">
					<i class="fas fa-arrow-left me-2"></i>返回簽到日曆
				</a>
			</div>
			<p class="text-muted mt-2 mb-0">連續簽到可獲得豐富獎勵！點數、經驗值與優惠券等您領取</p>
		</div>
	</div>

	<!-- 統計卡片 -->
	<div class="row mb-4">
		<div class="col-md-4 mb-3">
			<div class="card border-0 shadow-sm h-100" style="border-left: 4px solid #17a2b8 !important; background: linear-gradient(135deg, #f0f9ff 0%, #ffffff 100%);">
				<div class="card-body p-4">
					<div class="d-flex align-items-center">
						<div class="flex-grow-1">
							<p class="text-uppercase text-info fw-semibold mb-1" style="font-size: 0.75rem; letter-spacing: 0.5px;">獎勵階段總數</p>
							<h3 class="fw-bold text-dark mb-0">@Model.Rules.Count 個</h3>
						</div>
						<div class="text-info" style="opacity: 0.2;">
							<i class="fas fa-gift fa-3x"></i>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="col-md-4 mb-3">
			<div class="card border-0 shadow-sm h-100" style="border-left: 4px solid #ffa500 !important; background: linear-gradient(135deg, #fff5e6 0%, #ffffff 100%);">
				<div class="card-body p-4">
					<div class="d-flex align-items-center">
						<div class="flex-grow-1">
							<p class="text-uppercase fw-semibold mb-1" style="color: #ffa500; font-size: 0.75rem; letter-spacing: 0.5px;">總點數獎勵</p>
							<h3 class="fw-bold text-dark mb-0">@Model.Rules.Sum(r => r.Points) 點</h3>
						</div>
						<div style="color: #ffa500; opacity: 0.2;">
							<i class="fas fa-coins fa-3x"></i>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="col-md-4 mb-3">
			<div class="card border-0 shadow-sm h-100" style="border-left: 4px solid #28a745 !important; background: linear-gradient(135deg, #e8f5e9 0%, #ffffff 100%);">
				<div class="card-body p-4">
					<div class="d-flex align-items-center">
						<div class="flex-grow-1">
							<p class="text-uppercase text-success fw-semibold mb-1" style="font-size: 0.75rem; letter-spacing: 0.5px;">總經驗值獎勵</p>
							<h3 class="fw-bold text-dark mb-0">@Model.Rules.Sum(r => r.Experience) EXP</h3>
						</div>
						<div class="text-success" style="opacity: 0.2;">
							<i class="fas fa-star fa-3x"></i>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- 規則說明 -->
	<div class="alert alert-info border-0 shadow-sm mb-4" style="background: linear-gradient(135deg, #e0f2f1 0%, #f0f9ff 100%); border-radius: 16px;">
		<div class="d-flex">
			<div class="me-3">
				<i class="fas fa-info-circle fa-2x text-info"></i>
			</div>
			<div class="flex-grow-1">
				<h5 class="alert-heading fw-bold text-info mb-2">
					<i class="fas fa-lightbulb me-2"></i>如何獲得獎勵？
				</h5>
				<ul class="mb-0 text-dark" style="line-height: 1.8;">
					<li>每天簽到可獲得對應天數的獎勵</li>
					<li>連續簽到天數越多，獎勵越豐富</li>
					<li>中斷簽到會重新從第1天開始計算</li>
					<li>部分獎勵包含限量優惠券，先到先得</li>
					<li>點數可用於購買商品，經驗值用於寵物升級</li>
				</ul>
			</div>
		</div>
	</div>

	<!-- 獎勵規則卡片列表 -->
	<div class="row">
		@foreach (var rule in Model.Rules)
		{
			var isSpecialDay = rule.SignInDay == 7 || rule.SignInDay == 30;
			var cardBorderColor = isSpecialDay ? "#ffa500" : "#17a2b8";
			var dayBadgeClass = rule.SignInDay switch
			{
				7 => "bg-warning text-dark",
				30 => "bg-danger text-white",
				_ => "bg-info text-white"
			};

			<div class="col-md-6 col-lg-4 mb-4">
				<div class="card border-0 shadow-sm h-100 position-relative" style="border-radius: 20px; border-left: 5px solid @cardBorderColor !important; transition: transform 0.2s, box-shadow 0.2s;">
					@if (isSpecialDay)
					{
						<div class="position-absolute top-0 end-0 m-3">
							<span class="badge bg-gradient rounded-pill px-3 py-2" style="background: linear-gradient(135deg, #ff9a56 0%, #ff6a00 100%);">
								<i class="fas fa-crown me-1"></i>特別獎勵
							</span>
						</div>
					}

					<div class="card-body p-4">
						<!-- 天數 Badge -->
						<div class="mb-3">
							<span class="badge @dayBadgeClass rounded-pill px-4 py-2" style="font-size: 1.1rem; font-weight: 600;">
								<i class="fas fa-calendar-day me-2"></i>第 @rule.SignInDay 天
							</span>
						</div>

						<!-- 獎勵內容 -->
						<div class="mt-3">
							<!-- 點數 -->
							<div class="d-flex align-items-center mb-3 p-3 rounded-3" style="background-color: #fff5e6;">
								<div class="me-3" style="color: #ffa500;">
									<i class="fas fa-coins fa-2x"></i>
								</div>
								<div class="flex-grow-1">
									<small class="text-muted d-block mb-1">點數獎勵</small>
									<h5 class="fw-bold mb-0" style="color: #ffa500;">+@rule.Points 點</h5>
								</div>
							</div>

							<!-- 經驗值 -->
							<div class="d-flex align-items-center mb-3 p-3 rounded-3" style="background-color: #e8f5e9;">
								<div class="me-3 text-success">
									<i class="fas fa-star fa-2x"></i>
								</div>
								<div class="flex-grow-1">
									<small class="text-muted d-block mb-1">經驗值獎勵</small>
									<h5 class="fw-bold text-success mb-0">+@rule.Experience EXP</h5>
								</div>
							</div>

							<!-- 優惠券 -->
							@if (rule.HasCoupon && !string.IsNullOrEmpty(rule.CouponTypeCode))
							{
								<div class="d-flex align-items-center p-3 rounded-3" style="background: linear-gradient(135deg, #e3f2fd 0%, #f0f9ff 100%);">
									<div class="me-3 text-info">
										<i class="fas fa-ticket-alt fa-2x"></i>
									</div>
									<div class="flex-grow-1">
										<small class="text-muted d-block mb-1">額外獎勵</small>
										<h6 class="fw-bold text-info mb-0">
											<i class="fas fa-gift me-1"></i>@rule.CouponTypeCode
										</h6>
									</div>
								</div>
							}
						</div>

						<!-- 描述 -->
						@if (!string.IsNullOrEmpty(rule.Description))
						{
							<div class="mt-3 pt-3 border-top">
								<small class="text-muted">
									<i class="fas fa-comment-alt me-1"></i>@rule.Description
								</small>
							</div>
						}
					</div>
				</div>
			</div>
		}
	</div>

	<!-- 底部提示 -->
	<div class="row mt-4">
		<div class="col-12">
			<div class="card border-0 shadow-sm" style="background: linear-gradient(135deg, #f0f4f8 0%, #e8f0f4 100%); border-radius: 16px;">
				<div class="card-body p-4 text-center">
					<h5 class="fw-bold text-dark mb-3">
						<i class="fas fa-rocket text-info me-2"></i>立即開始簽到，累積豐富獎勵！
					</h5>
					<a href="@Url.Action("Index", "SignIn")" class="btn btn-info btn-lg rounded-pill px-5 shadow-sm">
						<i class="fas fa-calendar-check me-2"></i>前往簽到
					</a>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- 自訂樣式 -->
<style>
	/* 卡片懸停效果 */
	.card:hover {
		transform: translateY(-8px);
		box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15) !important;
	}

	/* 平滑過渡 */
	.card {
		transition: all 0.3s ease;
	}

	/* 按鈕懸停效果 */
	.btn:hover {
		transform: translateY(-2px);
		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
	}

	.btn {
		transition: all 0.2s ease;
	}

	/* Badge 動畫 */
	.badge {
		animation: pulse 2s infinite;
	}

	@@keyframes pulse {
		0%, 100% {
			opacity: 1;
		}
		50% {
			opacity: 0.8;
		}
	}

	/* 響應式調整 */
	@@media (max-width: 768px) {
		.card-body {
			padding: 1rem !important;
		}

		h2 {
			font-size: 1.5rem !important;
		}

		h3 {
			font-size: 1.25rem !important;
		}
	}
</style>
