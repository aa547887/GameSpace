@{
    ViewData["Title"] = "論壇 - 熱門";
}

@section Styles {
    <link rel="stylesheet" href="~/css/Forum/forum.css" asp-append-version="true" />
    <style>
        /* 只針對輪播，壓回容器寬度，單張滿版，不再撐版 */
        .hero-swiper,
        .hero-swiper .swiper,
        .hero-swiper .swiper-container,
        .hero-swiper .swiper-wrapper {
          width: 100% !important;
          max-width: 100% !important;
          min-width: 0 !important;
          overflow: hidden;
        }
        .hero-swiper .swiper-slide {
          width: 100% !important;
          max-width: 100% !important;
          flex: 0 0 100% !important;
          min-width: 0 !important;
          box-sizing: border-box;
        }
        .hero-swiper img, .hero-swiper video, .hero-swiper canvas {
          display:block; width:100%; height:auto; max-width:100%;
          object-fit: cover; /* 不想裁切就刪掉 */
        }

        /* 收合態保險（避免右側回彈） */
        html.sidebar-collapsed .container,
        html.sidebar-collapsed .container-fluid,
        html.sidebar-collapsed .row,
        html.sidebar-collapsed [class*="col-"] { min-width: 0; }
        .app-main { min-width: 0; }
    </style>
}

<!-- 左側主內容 -->
<div class="board-header d-flex align-items-center mb-2">
    <h2 class="m-0">論壇 / 熱門</h2>
    <a class="btn btn-primary btn-sm ms-auto" href="/forum/create">＋ 發表主題</a>
</div>

<ul id="sortTabs" class="nav nav-pills sort-tabs mb-2">
    <li class="nav-item"><a class="nav-link active" data-sort="lastReply" href="#">最新回覆</a></li>
    <li class="nav-item"><a class="nav-link" data-sort="created" href="#">發文時間</a></li>
    <li class="nav-item"><a class="nav-link" data-sort="hot" href="#">熱門</a></li>
    <li class="nav-item"><a class="nav-link" data-filter="admin" href="#">管理員</a></li>
    <li class="nav-item"><a class="nav-link" data-filter="insight" href="#">洞察</a></li>
</ul>

<div id="threadList"></div>

<div class="pager">
    <button id="prevBtn" class="btn btn-outline-secondary btn-sm">上一頁</button>
    <span id="pageInfo" class="text-muted"></span>
    <button id="nextBtn" class="btn btn-outline-secondary btn-sm">下一頁</button>
</div>

<!-- 右欄（只有 ForumLayout 會渲染這段） -->
@section RightRail {
    <div class="card shadow-sm p-3 mb-3">排行榜（假資料）</div>
    <div class="card shadow-sm p-3">熱門標籤 / 公告</div>
}

@section Scripts {
    <script type="module">
        import { ThreadList } from '/js/forum/thread-list.js';

        // 從 Server 注入 forumId（你可用 ViewBag / Model）
        const forumId = @(ViewBag.ForumId ?? 1);

        // 建立與初始化列表元件
        const list = ThreadList({ mount: 'threadList', forumId });
        list.init();

        // 右欄先保持寫死卡片，之後再抽成 Ranking 元件
    </script>
}
