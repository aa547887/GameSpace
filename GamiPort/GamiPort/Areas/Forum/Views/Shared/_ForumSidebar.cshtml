@* 論壇專屬 Sidebar（乾淨可維護版） *@
@inject Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper HtmlHelper
@{
    var r = ViewContext.RouteData.Values;
    string area = r["area"]?.ToString() ?? "";
    string ctrl = r["controller"]?.ToString() ?? "";
    string act = r["action"]?.ToString() ?? "";
    Func<string, string, string, bool> isActive = (a, c, x) => area == a && ctrl == c && act == x;
}

<nav class="forum-sidebar">
    <div class="sidebar-section">
        <h6 class="sidebar-title">主要導覽</h6>

        <a asp-area="" asp-controller="Home" asp-action="Index"
           class="btn-sidebar w-100 @(isActive("", "Home", "Index") ? "active" : "")">
            <i class="bi bi-house"></i> 首頁
        </a>

        <a asp-area="Store" asp-controller="Catalog" asp-action="Index"
           class="btn-sidebar w-100 @(isActive("Store", "Catalog", "Index") ? "active" : "")">
            <i class="bi bi-bag"></i> 商城
        </a>

        <a asp-area="Forum" asp-controller="Threads" asp-action="Index"
           class="btn-sidebar w-100 @(isActive("Forum", "Threads", "Index") ? "active" : "")">
            <i class="bi bi-chat-dots"></i> 論壇
        </a>
    </div>

    <div class="sidebar-section mt-4">
        <h6 class="sidebar-title">論壇功能</h6>

        <a asp-area="Forum" asp-controller="Threads" asp-action="Create"
           class="btn-sidebar w-100 @(isActive("Forum", "Threads", "Create") ? "active" : "")">
            <i class="bi bi-pencil-square"></i> 發表主題
        </a>

        <a asp-area="Forum" asp-controller="Insights" asp-action="Index"
           class="btn-sidebar w-100 @(isActive("Forum", "Insights", "Index") ? "active" : "")">
            <i class="bi bi-lightbulb"></i> 洞察
        </a>

        <a asp-area="Account" asp-controller="Manage" asp-action="Index"
           class="btn-sidebar w-100 @(isActive("Account", "Manage", "Index") ? "active" : "")">
            <i class="bi bi-person-circle"></i> 個人中心
        </a>
    </div>
</nav>

